{"id":"../src/typings/types.ts","dependencies":[{"name":"/Users/jxr/workplace/demo/monitor/tsconfig.json","includedInParent":true,"mtime":1639741900102},{"name":"/Users/jxr/workplace/demo/monitor/package.json","includedInParent":true,"mtime":1639741900078}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sendDataType = exports.Askpriority = void 0;\nvar Askpriority;\n\n(function (Askpriority) {\n  Askpriority[Askpriority[\"URGENT\"] = 1] = \"URGENT\";\n  Askpriority[Askpriority[\"IDLE\"] = 2] = \"IDLE\";\n})(Askpriority = exports.Askpriority || (exports.Askpriority = {}));\n\nvar sendDataType;\n\n(function (sendDataType) {\n  sendDataType[\"beacon\"] = \"beacon\";\n  sendDataType[\"imageLoad\"] = \"imageLoad\";\n  sendDataType[\"fetch\"] = \"fetch\";\n  sendDataType[\"xhr\"] = \"xhr\";\n})(sendDataType = exports.sendDataType || (exports.sendDataType = {}));"},"sourceMaps":{"js":{"mappings":[{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":0},"generated":{"line":7,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":7,"column":4}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":0},"generated":{"line":7,"column":15}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":0},"generated":{"line":9,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":0},"generated":{"line":9,"column":1}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":9,"column":11}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":0},"generated":{"line":9,"column":22}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":23},"generated":{"line":9,"column":24}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":2}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":13}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":14}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":25}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":26}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":34}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":35}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":38}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":39}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":40}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":43}},{"source":"../src/typings/types.ts","name":null,"original":{"line":149,"column":2},"generated":{"line":10,"column":51}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":2}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":13}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":14}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":25}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":26}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":32}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":33}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":36}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":37}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":38}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":41}},{"source":"../src/typings/types.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":11,"column":47}},{"source":"../src/typings/types.ts","name":null,"original":{"line":151,"column":1},"generated":{"line":12,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":0},"generated":{"line":12,"column":1}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":3}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":23},"generated":{"line":12,"column":14}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":17}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":24}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":25}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":36}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":41}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":48}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":49}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":60}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":23},"generated":{"line":12,"column":63}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":12,"column":65}},{"source":"../src/typings/types.ts","name":null,"original":{"line":148,"column":0},"generated":{"line":12,"column":66}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":0},"generated":{"line":14,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":14,"column":4}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":0},"generated":{"line":14,"column":16}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":0},"generated":{"line":16,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":0},"generated":{"line":16,"column":1}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":16,"column":11}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":0},"generated":{"line":16,"column":23}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":24},"generated":{"line":16,"column":25}},{"source":"../src/typings/types.ts","name":null,"original":{"line":154,"column":2},"generated":{"line":17,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":154,"column":2},"generated":{"line":17,"column":2}},{"source":"../src/typings/types.ts","name":null,"original":{"line":154,"column":2},"generated":{"line":17,"column":14}},{"source":"../src/typings/types.ts","name":null,"original":{"line":154,"column":2},"generated":{"line":17,"column":15}},{"source":"../src/typings/types.ts","name":null,"original":{"line":154,"column":2},"generated":{"line":17,"column":23}},{"source":"../src/typings/types.ts","name":null,"original":{"line":154,"column":2},"generated":{"line":17,"column":24}},{"source":"../src/typings/types.ts","name":null,"original":{"line":154,"column":2},"generated":{"line":17,"column":27}},{"source":"../src/typings/types.ts","name":null,"original":{"line":154,"column":2},"generated":{"line":17,"column":35}},{"source":"../src/typings/types.ts","name":null,"original":{"line":155,"column":2},"generated":{"line":18,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":155,"column":2},"generated":{"line":18,"column":2}},{"source":"../src/typings/types.ts","name":null,"original":{"line":155,"column":2},"generated":{"line":18,"column":14}},{"source":"../src/typings/types.ts","name":null,"original":{"line":155,"column":2},"generated":{"line":18,"column":15}},{"source":"../src/typings/types.ts","name":null,"original":{"line":155,"column":2},"generated":{"line":18,"column":26}},{"source":"../src/typings/types.ts","name":null,"original":{"line":155,"column":2},"generated":{"line":18,"column":27}},{"source":"../src/typings/types.ts","name":null,"original":{"line":155,"column":2},"generated":{"line":18,"column":30}},{"source":"../src/typings/types.ts","name":null,"original":{"line":155,"column":2},"generated":{"line":18,"column":41}},{"source":"../src/typings/types.ts","name":null,"original":{"line":156,"column":2},"generated":{"line":19,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":156,"column":2},"generated":{"line":19,"column":2}},{"source":"../src/typings/types.ts","name":null,"original":{"line":156,"column":2},"generated":{"line":19,"column":14}},{"source":"../src/typings/types.ts","name":null,"original":{"line":156,"column":2},"generated":{"line":19,"column":15}},{"source":"../src/typings/types.ts","name":null,"original":{"line":156,"column":2},"generated":{"line":19,"column":22}},{"source":"../src/typings/types.ts","name":null,"original":{"line":156,"column":2},"generated":{"line":19,"column":23}},{"source":"../src/typings/types.ts","name":null,"original":{"line":156,"column":2},"generated":{"line":19,"column":26}},{"source":"../src/typings/types.ts","name":null,"original":{"line":156,"column":2},"generated":{"line":19,"column":33}},{"source":"../src/typings/types.ts","name":null,"original":{"line":157,"column":2},"generated":{"line":20,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":157,"column":2},"generated":{"line":20,"column":2}},{"source":"../src/typings/types.ts","name":null,"original":{"line":157,"column":2},"generated":{"line":20,"column":14}},{"source":"../src/typings/types.ts","name":null,"original":{"line":157,"column":2},"generated":{"line":20,"column":15}},{"source":"../src/typings/types.ts","name":null,"original":{"line":157,"column":2},"generated":{"line":20,"column":20}},{"source":"../src/typings/types.ts","name":null,"original":{"line":157,"column":2},"generated":{"line":20,"column":21}},{"source":"../src/typings/types.ts","name":null,"original":{"line":157,"column":2},"generated":{"line":20,"column":24}},{"source":"../src/typings/types.ts","name":null,"original":{"line":157,"column":2},"generated":{"line":20,"column":29}},{"source":"../src/typings/types.ts","name":null,"original":{"line":158,"column":1},"generated":{"line":21,"column":0}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":0},"generated":{"line":21,"column":1}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":3}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":24},"generated":{"line":21,"column":15}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":18}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":25}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":26}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":38}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":43}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":50}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":51}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":63}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":24},"generated":{"line":21,"column":66}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":21,"column":68}},{"source":"../src/typings/types.ts","name":null,"original":{"line":153,"column":0},"generated":{"line":21,"column":69}}],"sources":{"../src/typings/types.ts":"export interface IMonitorConsumOptons {\n  beacon: number;\n  css: number;\n  fetch: number;\n  img: number;\n  other: number;\n  script: number;\n  total: number;\n  xmlhttprequest: number;\n}\nexport interface IMonitorNavigationTiming {\n  fetchTime?: number;\n  workerTime?: number;\n  totalTime?: number;\n  downloadTime?: number;\n  timeToFirstByte?: number;\n  headerSize?: number;\n  dnsLookupTime?: number;\n  tcpTime?: number;\n  whileTime?: number;\n  domTime?: number;\n  loadTime?: number;\n  parseDomTime?: number;\n}\nexport type EffectiveConnectiontype =\n  | \"2g\"\n  | \"3g\"\n  | \"4g\"\n  | \"5g\"\n  | \"slow-2g\"\n  | \"lte\";\nexport interface IMonitorNetworkInformation {\n  downlink?: number;\n  rtt?: number;\n  effectiveType?: EffectiveConnectiontype;\n  saveData?: boolean;\n}\n\nexport type IMonitorData =\n  | number\n  | IMonitorNavigationTiming\n  | IMonitorNetworkInformation;\n\nexport type IVitalsScore = \"good\" | \"needsImprovement\" | \"poor\" | null;\n\n// 回调给用户的数据\nexport interface IAnalyticsTrackerOptions {\n  metricName: string;\n  data: number;\n  eventProperties: object;\n  // navigatorInformation: object;\n  // customProperties?: object;\n  vitalsScorce: IVitalsScore; // 分数\n}\n\nexport type ErrorTypes = [\n  \"consoleError\",\n  \"unhandledrejection\",\n  \"networkError\",\n  \"iframeError\",\n  \"globalError\",\n  \"other\"\n]\n\nexport type PartialErrorTypes = Partial<Record<ErrorTypes[number], true>>\n\nexport interface IerrorConfig {\n  autoReport: boolean\n  type: (keyof PartialErrorTypes)[]\n  cache: boolean\n  cacheMaxLength: number\n}\n\n// 用户初始化参数\nexport interface IMonitorOptions {\n  postUrl: string\n  postType: sendDataType\n  error: IerrorConfig\n  // resourceTiming: boolean;\n  // elementTiming: boolean;\n  // analyticsTracker?: (options: IAnalyticsTrackerOptions) => void;\n  // maxTime: number;\n  // logUrl?: string;\n  // captureError?: boolean;\n}\n\nexport type IReportData = (body: object, url?: string) => void\n\nexport interface IMonitorConfig {\n  isResourceTiming: boolean\n  isElementTiming: boolean\n  reportData: IReportData\n  analyticsTracker: (options: IAnalyticsTrackerOptions) => void\n  maxTime: number\n}\n\nexport interface IperfObservers {\n  [measureName: string]: any\n}\n\n// 约束可以被订阅的性能指标\nexport type IPerformanceObserverType =\n  | \"first-input\"\n  | \"largest-contentful-paint\"\n  | \"layout-shift\"\n  | \"longtask\"\n  | \"measure\"\n  | \"navigation\"\n  | \"paint\"\n  | \"element\"\n  | \"resource\"\n\nexport type IPerformanceEntryInitiatorType =\n  | \"beacon\"\n  | \"css\"\n  | \"fetch\"\n  | \"img\"\n  | \"other\"\n  | \"script\"\n  | \"xmlhttprequest\"\n\n// 通过订阅回调 得到的具体的性能参数信息\nexport declare interface IPerformanceEntry {\n  processingStart: number\n  decodedBodySize?: number\n  duration: number\n  entryType: IPerformanceObserverType\n  initiatorType?: IPerformanceEntryInitiatorType\n  loadTime: number\n  name: string\n  renderTime: number\n  startTime: number\n  hadRecentInput?: boolean\n  value?: number\n  identifier?: string\n}\n\n// 度量指标数据\nexport interface IMetricMap {\n  [measureName: string]: boolean\n}\n\nexport interface PerformanceEventTiming extends PerformanceEntry {\n  processingStart: DOMHighResTimeStamp\n  target?: Node\n}\n\nexport enum Askpriority {\n  URGENT = 1,\n  IDLE = 2\n}\n\nexport enum sendDataType {\n  beacon = \"beacon\",\n  imageLoad = \"imageLoad\",\n  fetch = \"fetch\",\n  xhr = \"xhr\"\n}\n"},"lineCount":null}},"error":null,"hash":"8e30f0cf6858925b472e080153c6ea5d","cacheData":{"env":{}}}